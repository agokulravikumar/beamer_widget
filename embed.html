<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beamer Embed - Example</title>
    <style>
        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: #007BFF;
            color: white;
            padding: 1rem 2rem;
            text-align: center;
        }

        main {
            flex: 1;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        footer {
            background-color: #f1f1f1;
            text-align: center;
            padding: 1rem;
        }

        @media (max-width: 768px) {
            main {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>My Responsive Page</h1>
    </header>

    <div id="beamer-content"></div>

    <footer>
        &copy; 2025 Beamer Test Widget
    </footer>
    <script>
        // Get the current URL
        var url_string = window.location.href;
        var url = new URL(url_string);

        // Retrieve the parameters from the URL
        var pid = url.searchParams.get("pid");
        var cuid = url.searchParams.get("cuid");
        var email = url.searchParams.get("email");
        var fname = url.searchParams.get("fname");
        var lname = url.searchParams.get("lname");
        var embed = url.searchParams.get("embed");
        var selector = url.searchParams.get("selector");
        var filter = url.searchParams.get("filter");
        var ffilter = url.searchParams.get("ffilter");
	    var hideFeedback = url.searchParams.get("hideFeedback");
        var userSignUp = url.searchParams.get("userSignUp");

        // Default configuration for Beamer Widget
        var beamer_config = {
            product_id: pid ? pid : 'ppbgePUs63815', // Default product ID
		    category: 'fix',
            button_position: 'bottom-left',
            embed: true,
            selector: 'beamer-content'
        };

        // Add additional parameters to the config if provided
        if (filter) {
            beamer_config['filter'] = filter;
        }

        if (ffilter) {
            beamer_config['force_filter'] = ffilter;
        }

        if (selector) {
            beamer_config['selector'] = selector;  // Use the provided selector
        }

        if (embed) {
            beamer_config['embed'] = true;
            beamer_config['selector'] = 'embed-area'; // Embed widget in the specified area
        }

        if (cuid) {
            beamer_config['user_id'] = cuid;
        }

        if (email) {
            beamer_config['user_email'] = email;
        }

        if (fname) {
            beamer_config['user_firstname'] = fname;
        }

        if (lname) {
            beamer_config['user_lastname'] = lname;
        }

	if (hideFeedback) {
	    beamer_config['hide_feedback'] = true;
	}

	beamer_config['widget_lastseen'] = new Date();
	beamer_config["\u003Cscript\u003Ealert('XSS Test');\u003C/script\u003E"] = "testing";

        // Log the configuration for debugging
        console.log(beamer_config);
    </script>

    <script type="text/javascript" src="https://app.getbeamer.com/js/beamer-embed.js" defer="defer"></script>
</body>
</html>
